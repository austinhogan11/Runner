backend:
  replicaCount: 1
  image:
    repository: runneracrdev.azurecr.io/runner-backend
    tag: latest
  port: 8000

  env:
    # NOTE:
    # - For Azure Database for PostgreSQL (Flexible Server), SSL is required -> sslmode=require
    # - Replace runner-pg-dev with your actual server name if different.
    # - Best practice: inject the password via CI/Argo secret (not hardcoded here).
    databaseUrl: "postgresql://runneradmin:CHANGE_ME@runner-pg-dev.postgres.database.azure.com:5432/runner?sslmode=require"
    runMigrations: true

  probes:
    # your ingress routes /api to backend; app health endpoint should be /api/health externally,
    # but internally the container likely serves /health (depends on your FastAPI routes).
    # If your app route is actually /api/health inside the backend, keep this.
    healthPath: /api/health

  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

frontend:
  replicaCount: 1
  image:
    repository: runneracrdev.azurecr.io/runner-frontend
    tag: latest
  port: 80

service:
  type: ClusterIP

ingress:
  enabled: true
  className: nginx
  host: runner.local
  pathPrefixApi: /api(/|$)(.*)
  pathPrefixWeb: /

imagePullSecret:
  name: ""